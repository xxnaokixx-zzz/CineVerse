# CineVerse v2.0.0 リリースノート

## 🎉 メジャーアップデート v2.0.0

**リリース日**: 2024年12月19日  
**前バージョン**: v1.9.4.3 → **v2.0.0**

---

## 🚀 主要な新機能・改善

### 🔍 検索履歴機能の大幅改善
- **検索種別ごとの履歴表示分岐**
  - 作品検索：作品履歴のみ表示
  - 出演作品検索：キャスト（出演者）リストのみ表示  
  - 監督作品検索：スタッフ（監督など）リストのみ表示
- **人物履歴の削除機能対応**
  - 映画・アニメ履歴だけでなく、人物（例：木村拓哉）の履歴も削除可能に
  - フロントエンドでpersonIdを優先してAPIクエリに含めるよう修正
  - API（/api/search-history/route.ts）のDELETEメソッドにpersonIdによる削除分岐を追加

### 💬 コメント機能のUI統一
- **全ページでコメントモーダルを統一**
  - 映画・TV・アニメ・ドラマ詳細ページで「コメント」ボタンを上部に配置
  - モーダルでコメント投稿欄（CommentSection）を開くUIを実装
  - モーダルのUI（横長・高さ低め・中央寄せ・タイトルなし）をvariant="modal"で一元管理
  - モーダルの外側枠やタイトルの有無、バツ（×）ボタンの位置も完全統一

### 🎨 UI/UX改善
- **STORYやCAST & CREWセクションの改善**
  - 情報が取得できなくてもセクションを必ず表示
  - 「情報が取得できませんでした」等のメッセージを表示
- **ウォッチリスト・アカウント統計画面のUI/UX改善**
- **検索履歴の重複排除ロジックを強化**（tmdb_id優先）

### 🐛 バグ修正
- 人物履歴が削除できないバグを修正
- コメント欄や履歴リストの表示・削除挙動を一貫性のあるものに整理
- コードの分岐・状態管理・API連携の見直し

---

## 📋 技術的な変更点

### フロントエンド
- `SearchHistoryList`コンポーネントにsearchTypeを渡し、分岐ロジックで表示内容を切り替え
- コメントモーダルのUI統一（variant="modal"）
- 各詳細ページでのコメントボタン配置統一

### バックエンド
- `/api/search-history/route.ts`のDELETEメソッドにpersonIdによる削除分岐を追加
- 検索履歴の重複排除ロジック強化

### データベース
- 検索履歴テーブルの活用方法を改善

---

## 🔧 開発・運用改善

### リリース管理
- v2.0.0としてタグ付けし、リモートにプッシュ
- メジャーアップデートとして適切なバージョニング

### ドキュメント
- リリースノートの詳細化
- 機能説明の充実

---

## 📊 パフォーマンス・セキュリティ

### パフォーマンス
- 検索履歴の表示・削除処理の最適化
- モーダルUIの統一によるコード重複削減

### セキュリティ
- APIエンドポイントの適切な分岐処理
- データ削除処理の安全性向上

---

## 🎯 今後の予定

### 次回アップデート予定
- ヘッダーのUI修正
- さらなるUX改善

---

## 📝 変更履歴

### v1.9.4.3 → v2.0.0
- **6352c24**: 検索履歴・コメントUI/UX・API修正: 検索種別ごと履歴表示分岐、人物履歴削除対応、コメントモーダル統一、バグ修正
- **94a2a19**: ウォッチリスト・アカウント統計画面のUI/UX改善、バグ修正、リリース・GitHub管理対応
- **4ede56f**: fix: 検索履歴の重複排除ロジックを強化（tmdb_id優先）
- **d43ce2a**: docs: v1.9.4.3リリースノート・Issue・関連修正の反映

---

## 🙏 フィードバック

このリリースに関するご意見・ご要望がございましたら、GitHubのIssuesまたはプルリクエストでお知らせください。

**CineVerse v2.0.0** - より良い映画体験を提供します 🎬 